<!doctype html><html lang="en"><head><meta charSet="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>Veera's Internship, Week 3: Diving Into Shaders | Engineering at MAD – Digital Product Studio</title><meta name="description" content="I had previously used some vertex and fragment shaders in openFrameworks. However, in this project I wanted the shaders to communicate with data in a web app. Firstly, I learned how to affect shader uniforms on the Javascript side." /><meta property="og:url" content="https://www.mad.ac/" /><meta property="og:title" content="Veera's Internship, Week 3: Diving Into Shaders | Engineering at MAD – Digital Product Studio" /><meta property="og:description" content="I had previously used some vertex and fragment shaders in openFrameworks. However, in this project I wanted the shaders to communicate with data in a web app. Firstly, I learned how to affect shader uniforms on the Javascript side." /><meta property="og:image" content="https://mad.ac/images/social/mad-engineering-og-light.png" /><meta property="og:type" content="website" /><meta name="twitter:card" content="summary_large_image" /><meta name="twitter:site" content="@createdbymad" /><meta name="twitter:creator" content="@createdbymad" /><link rel="icon" href="../../favicon.ico" /><link rel="icon" href="../../favicon.svg" type="image/svg+xml" /><link rel="apple-touch-icon" href="../../apple-touch-icon.png" /><link rel="manifest" href="../../manifest.json" /><link rel="alternate" href="../feed.xml" type="application/rss+xml" title="MAD Engineering Blog Feed (RSS)" /><link rel="alternate" href="../feed.json" type="application/json" title="MAD Engineering Blog Feed (JSON)" /><link rel="preload" href="../../fonts/GT-MaruBeta-Bold.woff2" as="font" type="font/woff2" crossOrigin="true" /><link rel="preload" href="../../fonts/GT-MaruBeta-Regular.woff2" as="font" type="font/woff2" crossOrigin="true" /><link rel="stylesheet" href="../../styles/main%EF%B9%96v=431300964a77750d3c621bffa45c154cb1e8582c.css" /><script src="https://cdn.usefathom.com/script.js" data-site="ZUYODAUJ" defer></script></head><body class="blog font-serif"><header class="blog-header"><p class="blog-intro">Welcome to <a href="../../engineering.html">Engineering at MAD</a>. A space for creative tech, with words directly from our engineers.</p><nav class="blog-nav"><div class="blog-nav-home"><a href="../../index.html">mad.ac</a></div><div class="blog-nav-feeds"><a href="../feed.xml">Atom</a><a href="../feed.json">JSON</a></div></nav></header><main class="blog-content"><article class="post copy flow"><h1 class="post-title">Veera's Internship, Week 3: Diving Into Shaders</h1><p class="post-byline"><span class="post-date">20/04/2021</span><span class="post-author">By <a href="../../team/veera.html">Veera Jussila</a></span></p><div class="post-content copy flow"><ul>
<li><a href="veera-intern-blog-week-1.html">Week 1: Intern&#39;s Greetings!</a></li>
<li><a href="veera-intern-blog-week-2.html">Week 2: Refining the MVP</a></li>
</ul>
<p>It was a busy and exciting week for MAD amid the launch of the new website. On Monday, we still managed to meet up with <strong>Nikolai</strong> and <a href="../../team/nicholas.html">Nicholas</a> to talk about the possible visual directions for the data visualization.</p>
<p>I was encouraged to keep the visual outcome a bit open at this point. Instead of choosing to focus on a couple of basic geometries or a painting-like shader, Nikolai suggested that I explore as much as the timetable allows. We agreed that the NLP side of the text visualization app needs to be worked on simultaneously, but for the next two weeks it makes sense to focus on understanding Three.js and shaders as they are not as familiar to me. After creating a few visually appealing animations, it is then easy to choose the most interesting one and connect that to data.</p>
<p>I created a bunch of HTML files that I could fill with Three.js sketches and then just open them as tabs in the browser. One of the benefits of Three.js is that it can simply be included as a script in the HTML:</p>
<pre><code>&lt;script src=&quot;js/three.js&quot;&gt;&lt;/script&gt;
</code></pre>
<p>…And then you are ready to create 3D scenes!</p>
<h2 id="simulating-data">Simulating data</h2>
<p>I decided to simulate data by creating a set of random values that could be coming from the NLP and server side:</p>
<pre><code class="language-javascript"><span class="token keyword">var</span> value1 <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2001</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Could be number of tweets</span>
<span class="token keyword">var</span> value2 <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// between 0 and 1</span>
<span class="token keyword">var</span> value3 <span class="token operator">=</span> <span class="token function">getRandomArbitrary</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Could be sentiment value between -1.0 and 1.0</span>
<span class="token keyword">var</span> value4 <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Could be average sentence length</span>
<span class="token keyword">var</span> value5 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span> length<span class="token operator">:</span> <span class="token number">2000</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Could be certain values of all the accounts 2000 tweets</span>
</code></pre>
<p>I experimented with Three.js examples on groups, buffer geometries and lines. For example, I managed to make cube colors depend on an array called <code>randomValues</code>, its length being the same as the number of the cubes.</p>
<pre><code class="language-javascript"><span class="token keyword">let</span> randomValues <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span> length<span class="token operator">:</span> numberOfCubes <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Each index can have a value between 0-9; if the value is more than 5, color is violet. This could be a simple way to illustrate the amount of negative or positive tweets in the user account. In a similar fashion, I experimented with <a href="https://threejs.org/examples/#webgl_lines_sphere">this</a> Three.js example by changing the colors and the number of triangles based on my variables:</p>
<p><video class="rounded" preload="none" autoPlay playsInline muted loop width="1320" height="1320" poster="../../images/engineering/veera-intern-blog-week-3/fireworks.png"><source type="video/mp4" src="../../images/engineering/veera-intern-blog-week-3/testing_lines.mp4"></video></p>
<h2 id="first-steps-with-shaders">First steps with shaders</h2>
<p>In addition to this, I had an exciting shader workshop with Nikolai. I have previously used some vertex and fragment shaders in <a href="https://openframeworks.cc/ofBook/chapters/shaders.html">openFrameworks</a>. There, shaders live as separate files and are loaded when the app compiles. However, we first focused on understanding how to make GLSL, ie. the language of shaders, communicate with Javascript in a web app.</p>
<p>As an example, we inspected the shader code Nikolai had written for the background on the MAD website. The goal for me was to understand how to get fictional variables data1, data2 and data3 to have an effect on both the shader AND the Three.js side of a visual. For example, the color and pattern of the shader could be affected by the sentiment values of the Twitter account and the size of the 3D shapes by something else.</p>
<p>In practice, shader outputs can be controlled by using uniforms. They are global shader variables that can be updated in the <code>animate()</code> function on Javascript side, for example.</p>
<p><img loading="lazy" src="../../media/1024/images/engineering/veera-intern-blog-week-3/shader_tuple_drawing.png" srcset="../../media/512/images/engineering/veera-intern-blog-week-3/shader_tuple_drawing.png 512w,../../media/1024/images/engineering/veera-intern-blog-week-3/shader_tuple_drawing.png 1024w,../../media/2048/images/engineering/veera-intern-blog-week-3/shader_tuple_drawing.png 2048w,../../media/3072/images/engineering/veera-intern-blog-week-3/shader_tuple_drawing.png 3072w,../../media/4096/images/engineering/veera-intern-blog-week-3/shader_tuple_drawing.png 4096w" sizes="(min-width: 1660px) 1100px, (min-width: 1000px) calc(100vw - 560px), 100vw" alt="A gradient shader with some Tuple drawings about noise" /></p>
<p>We had fun tweaking colors and the amount of noise and graininess. With shaders, it is easy to get rewarding results by accident. However, I wanted to understand them better in order to actually control the visuals.</p>
<p>We also discussed the balance between making a data-based, abstract artwork and a visual that strictly represents data (each shape is of accurate size etc.). I’m after a result that is somewhat in between. We discussed that one can illustrate the character of a text via colors, patterns, animation speeds and so on – the result is an interpretation.</p>
<p>I will study these two shader resources before the next weeks&#39; session:</p>
<ul>
<li><a href="https://thebookofshaders.com/">The Book of Shaders</a></li>
<li><a href="https://webglfundamentals.org/webgl/lessons/webgl-shaders-and-glsl.html">WebGLFundametals</a></li>
</ul>
<hr>
</div><footer class="post-footer"><img class="post-footer-image" src="../../images/team/veera.png" alt width="120" height="120" /><p>By <a href="../../team/veera.html">Veera Jussila</a></p><p>20/04/2021</p></footer></article></main></body></html>