<!doctype html><html lang="en"><head><meta charSet="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>Veera's Internship, Week 10: Materials and Classes | Engineering at MAD – Digital Product Studio</title><meta name="description" content="This week meant a lot of progress for the project. I will focus on two things that gave me direction: richer use of materials and introduction of classes." /><meta property="og:url" content="https://www.mad.ac/" /><meta property="og:title" content="Veera's Internship, Week 10: Materials and Classes | Engineering at MAD – Digital Product Studio" /><meta property="og:description" content="This week meant a lot of progress for the project. I will focus on two things that gave me direction: richer use of materials and introduction of classes." /><meta property="og:image" content="https://mad.ac/images/social/mad-engineering-og-light.png" /><meta property="og:type" content="website" /><meta name="twitter:card" content="summary_large_image" /><meta name="twitter:site" content="@createdbymad" /><meta name="twitter:creator" content="@createdbymad" /><link rel="icon" href="../../favicon.ico" /><link rel="icon" href="../../favicon.svg" type="image/svg+xml" /><link rel="apple-touch-icon" href="../../apple-touch-icon.png" /><link rel="manifest" href="../../manifest.json" /><link rel="alternate" href="../feed.xml" type="application/rss+xml" title="MAD Engineering Blog Feed (RSS)" /><link rel="alternate" href="../feed.json" type="application/json" title="MAD Engineering Blog Feed (JSON)" /><link rel="preload" href="../../fonts/GT-MaruBeta-Bold.woff2" as="font" type="font/woff2" crossOrigin="true" /><link rel="preload" href="../../fonts/GT-MaruBeta-Regular.woff2" as="font" type="font/woff2" crossOrigin="true" /><link rel="stylesheet" href="../../styles/main%EF%B9%96v=431300964a77750d3c621bffa45c154cb1e8582c.css" /><script src="https://cdn.usefathom.com/script.js" data-site="ZUYODAUJ" defer></script></head><body class="blog font-serif"><header class="blog-header"><p class="blog-intro">Welcome to <a href="../../engineering.html">Engineering at MAD</a>. A space for creative tech, with words directly from our engineers.</p><nav class="blog-nav"><div class="blog-nav-home"><a href="../../index.html">mad.ac</a></div><div class="blog-nav-feeds"><a href="../feed.xml">Atom</a><a href="../feed.json">JSON</a></div></nav></header><main class="blog-content"><article class="post copy flow"><h1 class="post-title">Veera's Internship, Week 10: Materials and Classes</h1><p class="post-byline"><span class="post-date">08/06/2021</span><span class="post-author">By <a href="../../team/veera.html">Veera Jussila</a></span></p><div class="post-content copy flow"><ul>
<li><a href="veera-intern-blog-week-1.html">Week 1: Intern&#39;s Greetings!</a></li>
<li><a href="veera-intern-blog-week-2.html">Week 2: Refining the MVP</a></li>
<li><a href="veera-intern-blog-week-3.html">Week 3: Diving Into Shaders</a></li>
<li><a href="veera-intern-blog-week-4.html">Week 4: From 2D to 3D</a></li>
<li><a href="veera-intern-blog-week-5.html">Week 5: Back to Inspiration Images</a></li>
<li><a href="veera-intern-blog-week-6.html">Week 6: Blended Approach</a></li>
<li><a href="veera-intern-blog-week-7.html">Week 7: Restructuring the Project</a></li>
<li><a href="veera-intern-blog-week-8.html">Week 8: Drawing Board</a></li>
<li><a href="veera-intern-blog-week-9.html">Week 9: Arranging Furniture</a></li>
</ul>
<p>This week meant a lot of progress for the project. To keep this post compact, I will focus on two things that gave me direction: richer use of materials and introduction of classes.</p>
<p>Firstly, as we have dived into a lot of shader programming recently, writing custom shaders has felt like the default option for creating the surfaces of the room. However, by looking at some examples, it became clear that interesting, lively surfaces don’t necessarily need a custom shader, but can also rely on creative uses of the built-in ones.</p>
<p>One example we studied with <a href="../../team/nikolai.html">Nikolai</a> was this fun <a href="https://www.stinkstudios.com/work/hands-wtf">project</a> by <strong>Stink Studios</strong>. It renders a wild selection of patterns and materials on a simple, hand-shaped mesh. We were especially inspired by the way they use environment maps for reflections. If one dives into the source code in developer mode, one finds a large bunch of images that are never visible per se, but rather used to create interesting reflections on the object.</p>
<p>So, for example, one can create a sphere or statue with <a href="https://threejs.org/docs/#api/en/materials/MeshStandardMaterial">MeshStandardMaterial</a> and define its metalness and roughness. Like a real metallic object, the mesh now reflects the light sources in the room. However, maybe we want the statue to reflect some interesting colors and patterns. Or maybe we want it to reflect a room or building, sparking the viewer&#39;s imagination by hinting at something that exists outside the viewport.</p>
<p>For this kind of results, Three.js uses environment maps. In this <a href="https://threejs.org/examples/#webgl_materials_displacementmap">example</a>, the pleasant reflections are partly created with images of the Swedish Royal Palace, even if there is nothing castle-like visible in the scene.</p>
<p>To create a pink shape that uses the six castle images for reflections, one can create a <code>reflectionCube</code> and do the following:</p>
<pre><code class="language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token string">"/static/images/"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> format <span class="token operator">=</span> <span class="token string">".jpeg"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> urls <span class="token operator">=</span> <span class="token punctuation">[</span>
  path <span class="token operator">+</span> <span class="token string">"px"</span> <span class="token operator">+</span> format<span class="token punctuation">,</span>
  path <span class="token operator">+</span> <span class="token string">"nx"</span> <span class="token operator">+</span> format<span class="token punctuation">,</span>
  path <span class="token operator">+</span> <span class="token string">"py"</span> <span class="token operator">+</span> format<span class="token punctuation">,</span>
  path <span class="token operator">+</span> <span class="token string">"ny"</span> <span class="token operator">+</span> format<span class="token punctuation">,</span>
  path <span class="token operator">+</span> <span class="token string">"pz"</span> <span class="token operator">+</span> format<span class="token punctuation">,</span>
  path <span class="token operator">+</span> <span class="token string">"nz"</span> <span class="token operator">+</span> format
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> reflectionCube <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>CubeTextureLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>urls<span class="token punctuation">)</span><span class="token punctuation">;</span>
reflectionCube<span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>sRGBEncoding<span class="token punctuation">;</span>
<span class="token keyword">const</span> exampleMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshStandardMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  color<span class="token operator">:</span> <span class="token number">0xff80ce</span><span class="token punctuation">,</span>
  emissive<span class="token operator">:</span> <span class="token number">0x842bd7</span><span class="token punctuation">,</span>
  metalness<span class="token operator">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
  roughness<span class="token operator">:</span> <span class="token number">0.01</span><span class="token punctuation">,</span>
  envMap<span class="token operator">:</span> reflectionCube<span class="token punctuation">,</span>
  envMapIntensity<span class="token operator">:</span> <span class="token number">1.0</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="creating-plants-with-classes">Creating Plants with Classes</h2>
<p>We also started to make the project code more manageable by introducing classes. Again, classes are familiar to me via Processing and openFrameworks, so that made the topic easier to approach. One resource I’m going to study further is by <a href="https://www.w3schools.com/js/js_classes.asp">W3Schools</a>. I usually find their tutorials very clear and pleasant to follow.</p>
<p>In object-oriented programming, classes increase scalability and modularity. The benefits of using classes are very clear in this sort of an open-ended, experimental project. Instead of having 100 lines of code in my index.js that just generates a certain kind of a plant, I have plants.js file containing a few plant classes. Then in the main code I’m free to choose between a rose and a cactus easily, just with a few lines of code.</p>
<pre><code class="language-javascript"><span class="token keyword">let</span> plant <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ExperimentPlant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
plant<span class="token punctuation">.</span>mesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">;</span>
plant<span class="token punctuation">.</span>mesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
plant<span class="token punctuation">.</span>mesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>plant<span class="token punctuation">.</span>mesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Speaking of plants, I created a happy accident when exploring geometry distortions with <a href="https://threejs.org/examples/webgl_morphtargets.html">morphtargets</a> . I was able to distort a box in a way that created a plant-like shape:</p>
<p><img loading="lazy" src="../../media/1024/images/engineering/veera-intern-blog-week-10/plant.png" srcset="../../media/512/images/engineering/veera-intern-blog-week-10/plant.png 512w,../../media/1024/images/engineering/veera-intern-blog-week-10/plant.png 1024w,../../media/2048/images/engineering/veera-intern-blog-week-10/plant.png 2048w,../../media/3072/images/engineering/veera-intern-blog-week-10/plant.png 3072w,../../media/4096/images/engineering/veera-intern-blog-week-10/plant.png 4096w" sizes="(min-width: 1660px) 1100px, (min-width: 1000px) calc(100vw - 560px), 100vw" alt="Big plant shape in pink room" /></p>
<p>With help from Nikolai, I had already experimented creating plant-like shapes with spheres and for loops:</p>
<p><img loading="lazy" src="../../media/1024/images/engineering/veera-intern-blog-week-10/sphereplant.png" srcset="../../media/512/images/engineering/veera-intern-blog-week-10/sphereplant.png 512w,../../media/1024/images/engineering/veera-intern-blog-week-10/sphereplant.png 1024w,../../media/2048/images/engineering/veera-intern-blog-week-10/sphereplant.png 2048w,../../media/3072/images/engineering/veera-intern-blog-week-10/sphereplant.png 3072w,../../media/4096/images/engineering/veera-intern-blog-week-10/sphereplant.png 4096w" sizes="(min-width: 1660px) 1100px, (min-width: 1000px) calc(100vw - 560px), 100vw" alt="Sphere plant shape and cylinders in pink room" /></p>
<p>We created a similar class-based approach to floors as well. In the main code, a floor with circle pattern can now be called just with:</p>
<pre><code class="language-javascript"><span class="token keyword">const</span> floorMat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FloorMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">"circles"</span><span class="token punctuation">,</span> aspect<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> scale<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Next, I will sketch a few example rooms and plan how their elements are connected. Then, within these main room types, there is variation. For example, maybe a pink wall and blue tile floor always go hand in hand, but NLP data affects how detailed the tile pattern is.</p>
<hr>
</div><footer class="post-footer"><img class="post-footer-image" src="../../images/team/veera.png" alt width="120" height="120" /><p>By <a href="../../team/veera.html">Veera Jussila</a></p><p>08/06/2021</p></footer></article></main></body></html>