<!doctype html><html lang="en"><head><meta charSet="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>May: Finishing Touches | Engineering at MAD – Digital Product Studio</title><meta name="description" content="Almost there! In the last post on the data visualization app, I’ll focus on three things: adding generative sculptures, improving the performance on Flask side and creating a start and loading page." /><meta property="og:url" content="https://www.mad.ac/" /><meta property="og:title" content="May: Finishing Touches | Engineering at MAD – Digital Product Studio" /><meta property="og:description" content="Almost there! In the last post on the data visualization app, I’ll focus on three things: adding generative sculptures, improving the performance on Flask side and creating a start and loading page." /><meta property="og:image" content="https://mad.ac/images/social/mad-engineering-og-light.png" /><meta property="og:type" content="website" /><meta name="twitter:card" content="summary_large_image" /><meta name="twitter:site" content="@createdbymad" /><meta name="twitter:creator" content="@createdbymad" /><link rel="icon" href="../../favicon.ico" /><link rel="icon" href="../../favicon.svg" type="image/svg+xml" /><link rel="apple-touch-icon" href="../../apple-touch-icon.png" /><link rel="manifest" href="../../manifest.json" /><link rel="alternate" href="../feed.xml" type="application/rss+xml" title="MAD Engineering Blog Feed (RSS)" /><link rel="alternate" href="../feed.json" type="application/json" title="MAD Engineering Blog Feed (JSON)" /><link rel="preload" href="../../fonts/GT-MaruBeta-Bold.woff2" as="font" type="font/woff2" crossOrigin="true" /><link rel="preload" href="../../fonts/GT-MaruBeta-Regular.woff2" as="font" type="font/woff2" crossOrigin="true" /><link rel="stylesheet" href="../../styles/main%EF%B9%96v=431300964a77750d3c621bffa45c154cb1e8582c.css" /><script src="https://cdn.usefathom.com/script.js" data-site="ZUYODAUJ" defer></script></head><body class="blog font-serif"><header class="blog-header"><p class="blog-intro">Welcome to <a href="../../engineering.html">Engineering at MAD</a>. A space for creative tech, with words directly from our engineers.</p><nav class="blog-nav"><div class="blog-nav-home"><a href="../../index.html">mad.ac</a></div><div class="blog-nav-feeds"><a href="../feed.xml">Atom</a><a href="../feed.json">JSON</a></div></nav></header><main class="blog-content"><article class="post copy flow"><h1 class="post-title">May: Finishing Touches</h1><p class="post-byline"><span class="post-date">29/06/2021</span><span class="post-author">By <a href="../../team/veera.html">Veera Jussila</a></span></p><div class="post-content copy flow"><ul>
<li><a href="veera-intern-blog-week-1.html">Week 1: Intern&#39;s Greetings!</a></li>
<li><a href="veera-intern-blog-week-2.html">Week 2: Refining the MVP</a></li>
<li><a href="veera-intern-blog-week-3.html">Week 3: Diving Into Shaders</a></li>
<li><a href="veera-intern-blog-week-4.html">Week 4: From 2D to 3D</a></li>
<li><a href="veera-intern-blog-week-5.html">Week 5: Back to Inspiration Images</a></li>
<li><a href="veera-intern-blog-week-6.html">Week 6: Blended Approach</a></li>
<li><a href="veera-intern-blog-week-7.html">Week 7: Restructuring the Project</a></li>
<li><a href="veera-intern-blog-week-8.html">Week 8: Drawing Board</a></li>
<li><a href="veera-intern-blog-week-9.html">Week 9: Arranging Furniture</a></li>
<li><a href="veera-intern-blog-week-10.html">Week 10: Materials and Classes</a></li>
<li><a href="veera-intern-blog-week-11.html">Week 11: Different Room Types</a></li>
<li><a href="veera-intern-blog-week-12.html">Week 12: Planning for the Final Weeks</a></li>
</ul>
<p>In the beginning of May, we had a functioning Flask app that was able to take a Twitter username and generate a custom 3D room as a response. However, we wanted to take the app further by giving more thought to some details. I’ll focus on three things: adding generative sculptures, improving the performance on the Flask side and designing a start and loading page.</p>
<p>Initially, I had three different 3D models that I was using as sculptures in the room. These were by <a href="https://sketchfab.com/3d-models/head-of-david-but-with-hay-585af747e89f4e78afda322c487a5059">doubletwisted</a>, <a href="https://sketchfab.com/3d-models/deformed-ball-4e92e4edb588403d8f5955ad88d2a798">Aiekick</a> and <a href="https://sketchfab.com/3d-models/assignment-1-abstract-sculpture-7b7ba579c6d24d7d9f924e9e7d89c299">justindesigner</a>. However, <a href="../../team/nikolai.html">Nikolai</a> and I thought that sculptures could be a natural way to introduce more generative elements in the room. We studied some shape grammar experiments by <a href="https://observablehq.com/@mayagao/basic-shape-grammar-designs">Maya Gao</a> and became interested in them. Nikolai also suggested testing L-systems to create organic shapes and provided me with some code to build on.</p>
<p>I ended up switching between three different sculpture types in the room: one with randomly placed boxes (in picture), one blob-like made with <a href="https://threejs.org/docs/#api/en/geometries/TorusGeometry">TorusGeometries</a> and a L-system and one that is deforming one big TorusGeometry.</p>
<p><img loading="lazy" src="../../media/1024/images/engineering/veera-intern-blog-week-13/box_sculpture.png" srcset="../../media/512/images/engineering/veera-intern-blog-week-13/box_sculpture.png 512w,../../media/1024/images/engineering/veera-intern-blog-week-13/box_sculpture.png 1024w,../../media/2048/images/engineering/veera-intern-blog-week-13/box_sculpture.png 2048w,../../media/3072/images/engineering/veera-intern-blog-week-13/box_sculpture.png 3072w,../../media/4096/images/engineering/veera-intern-blog-week-13/box_sculpture.png 4096w" sizes="(min-width: 1660px) 1100px, (min-width: 1000px) calc(100vw - 560px), 100vw" alt="Box sculpture" /></p>
<p>Code for the BoxSculpture class as an example:</p>
<pre><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">BoxSculpture</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>
    dim <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">,</span>
    width <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>
    height <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>
    depth <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>
    numOf <span class="token operator">=</span> <span class="token number">600</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">function</span> <span class="token function">makeCube</span><span class="token punctuation">(</span><span class="token parameter">dim</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> cube <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> dim<span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cube<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> y <span class="token operator">&lt;</span> dim<span class="token punctuation">;</span> y<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          cube<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> z <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> z <span class="token operator">&lt;</span> dim<span class="token punctuation">;</span> z<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            cube<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">[</span>z<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> cube<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">randomPoint</span><span class="token punctuation">(</span><span class="token parameter">dim</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> dim<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">randomPosition</span><span class="token punctuation">(</span><span class="token parameter">dim</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token function">randomPoint</span><span class="token punctuation">(</span>dim<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">randomPoint</span><span class="token punctuation">(</span>dim<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">randomPoint</span><span class="token punctuation">(</span>dim<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">hasSpace</span><span class="token punctuation">(</span><span class="token parameter">cube<span class="token punctuation">,</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> x <span class="token operator">-</span> <span class="token number">0.5</span> <span class="token operator">*</span> width<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> x <span class="token operator">+</span> <span class="token number">0.5</span> <span class="token operator">*</span> width<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">></span> cube<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> y <span class="token operator">-</span> <span class="token number">0.5</span> <span class="token operator">*</span> height<span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> y <span class="token operator">+</span> <span class="token number">0.5</span> <span class="token operator">*</span> height<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> j <span class="token operator">></span> cube<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> k <span class="token operator">=</span> z <span class="token operator">-</span> <span class="token number">0.5</span> <span class="token operator">*</span> depth<span class="token punctuation">;</span> k <span class="token operator">&lt;=</span> z <span class="token operator">+</span> <span class="token number">0.5</span> <span class="token operator">*</span> depth<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> k <span class="token operator">></span> cube<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>cube<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> bound <span class="token operator">=</span> <span class="token function">makeCube</span><span class="token punctuation">(</span>dim<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> sculpt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Group</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> standHeight <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> standGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BoxGeometry</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> standHeight<span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> stand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>standGeometry<span class="token punctuation">,</span> standDarkMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span>
    stand<span class="token punctuation">.</span>receiveShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    stand<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    stand<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> standHeight <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> numOf<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> geometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BoxGeometry</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span>width <span class="token operator">/</span> dim<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span>height <span class="token operator">/</span> dim<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span>depth <span class="token operator">/</span> dim<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token number">10</span><span class="token punctuation">,</span>
        <span class="token number">10</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// these are blocks that we add to the group and finally draw</span>
      <span class="token keyword">const</span> block <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>geometry<span class="token punctuation">,</span> sharpMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// individual random position with each round of the loop</span>
      <span class="token keyword">let</span> position <span class="token operator">=</span> <span class="token function">randomPosition</span><span class="token punctuation">(</span>dim<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>bound<span class="token punctuation">[</span>position<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>position<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>position<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        block<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">=</span> position<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>width <span class="token operator">/</span> dim<span class="token punctuation">)</span> <span class="token operator">-</span> width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        block<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span>
          position<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>height <span class="token operator">/</span> dim<span class="token punctuation">)</span> <span class="token operator">+</span> standHeight <span class="token operator">+</span> <span class="token number">0.5</span> <span class="token operator">*</span> <span class="token punctuation">(</span>height <span class="token operator">/</span> dim<span class="token punctuation">)</span><span class="token punctuation">;</span>
        block<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">=</span> position<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>depth <span class="token operator">/</span> dim<span class="token punctuation">)</span> <span class="token operator">-</span> depth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        block<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        block<span class="token punctuation">.</span>receiveShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token comment">// add that small cube to the group</span>
        sculpt<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>block<span class="token punctuation">)</span><span class="token punctuation">;</span>
        bound<span class="token punctuation">[</span>position<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>position<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>position<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    sculpt<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>stand<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// this is the result that class returns</span>
    <span class="token keyword">return</span> sculpt<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>In the main code:</p>
<pre><code class="language-javascript"><span class="token keyword">const</span> sculpture <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BoxSculpture</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// value coming from data</span>
  dim<span class="token operator">:</span> resizeBoxes<span class="token punctuation">,</span>
  width<span class="token operator">:</span> <span class="token number">26</span><span class="token punctuation">,</span>
  height<span class="token operator">:</span> <span class="token number">36</span><span class="token punctuation">,</span>
  depth<span class="token operator">:</span> <span class="token number">26</span><span class="token punctuation">,</span>
  numOf<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

sculpture<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
sculpture<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
sculpture<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">;</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>sculpture<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Virtually every user gets a unique sculpture because of randomness and differencies in data, so it was definitely worth it to spend some time studying generative rules.</p>
<h2 id="minimalist-design">Minimalist Design</h2>
<p>On the Python side, we wanted to improve performance. One important change was to get rid of a text file called <code>textMass.txt</code>. I had previously appended all the user’s tweets to that one file in to make it easier to inspect during prototyping. However, this had meant opening the text file, appending to it and closing it before moving on to calculations. A much more straightforward solution is just using a string instead:</p>
<pre><code class="language-python">textMass <span class="token operator">=</span> <span class="token string">""</span>
</code></pre>
<p>Then cleaning the tweet and adding it to a long string in for loop:</p>
<pre><code class="language-python">cleanedText <span class="token operator">=</span> cleanTxt<span class="token punctuation">(</span>tweet<span class="token punctuation">.</span>full_text<span class="token punctuation">)</span>
textMass <span class="token operator">+=</span> cleanedText
</code></pre>
<p>And outside the for loop:</p>
<pre><code class="language-python"><span class="token operator">//</span> ready <span class="token keyword">for</span> calculating NLP values
whole_text_sample <span class="token operator">=</span> TextBlob<span class="token punctuation">(</span>textMass<span class="token punctuation">)</span>
</code></pre>
<p>I also learned how great <a href="https://www.w3schools.com/python/python_sets.asp">sets</a> can be for NLP calculations. Since they ignore duplicate values, they can easily be used to store unique words of the text corpus:</p>
<pre><code class="language-python"><span class="token keyword">for</span> sentence <span class="token keyword">in</span> whole_text_sample<span class="token punctuation">.</span>sentences<span class="token punctuation">:</span>
    <span class="token keyword">for</span> word <span class="token keyword">in</span> sentence<span class="token punctuation">.</span>tags<span class="token punctuation">:</span>
        uniqueWords<span class="token punctuation">.</span>add<span class="token punctuation">(</span>word<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token comment"># checking tags that indicate verbs</span>
        <span class="token keyword">if</span> word<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'JJ'</span> <span class="token keyword">or</span> word<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'JJR'</span> <span class="token keyword">or</span> word<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'JJS'</span><span class="token punctuation">:</span>
            uniqueAdjectives<span class="token punctuation">.</span>add<span class="token punctuation">(</span>word<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre>
<p>Finally, it was time to design a minimal start page and add a loading page. I created a simple design with a gradient background that resonated with the sky shader of the 3D scene. <a href="../../team/nicholas.html">Nicholas</a> suggested using a blue background instead, as a reference to Twitter, and made great suggestions for the <a href="https://rsms.me/inter/">font</a> and the spacing of the elements. The loading page is simply a div element that is only displayed while the scene is loading.</p>
<pre><code class="language-css"><span class="token selector">#loadingImg</span> <span class="token punctuation">{</span>
<span class="token property">background-color</span><span class="token punctuation">:</span> #54a1e9<span class="token punctuation">;</span>
<span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>#54a1e9<span class="token punctuation">,</span> #7ba7f8<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">/*optional*/</span>
<span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token property">background-attachment</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
<span class="token property">font-weight</span><span class="token punctuation">:</span> 400<span class="token punctuation">;</span>
<span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
<span class="token property">opacity</span><span class="token punctuation">:</span> 0.9<span class="token punctuation">;</span>
<span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
<span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
<span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token property">transition</span><span class="token punctuation">:</span> opacity 1000ms ease-in-out<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#loadingImg.animate-out</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#loadingImg p</span> <span class="token punctuation">{</span>
  <span class="token property">animation-name</span><span class="token punctuation">:</span> pulse<span class="token punctuation">;</span>
  <span class="token property">animation-duration</span><span class="token punctuation">:</span> 1000ms<span class="token punctuation">;</span>
  <span class="token property">animation-iteration-count</span><span class="token punctuation">:</span> infinite<span class="token punctuation">;</span>
  <span class="token property">animation-timing-function</span><span class="token punctuation">:</span> ease-in-out<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>These are the data values that are affecting the room in its current form:</p>
<ul>
<li><strong>Average tone</strong>: room type, the plant type vs. a pool, sky colors, plant shape, artwork type, artwork and mirror frame, sculpture type and shape</li>
<li><strong>Number of positive / negative / neutral tweets</strong>: tints and shades, sky colors, pillows vs. chair</li>
<li><strong>Average subjectivity</strong>: height of the mirror</li>
<li><strong>Number of &quot;I&quot;, &quot;me&quot;, &quot;myself&quot;, &quot;my&quot; and &quot;mine&quot;</strong>: width of the mirror</li>
<li><strong>Average sentence length</strong>: sky colors</li>
<li><strong>Number of unique words</strong>: level of detail in the artwork, sculpture type, sculpture detail in torus sculpture</li>
<li><strong>Interactions with other users</strong>: window size, plant growth</li>
<li><strong>Number of adjectives</strong>: sculpture dimensions, sculpture shape in torus sculpture</li>
<li><strong>Number of &quot;nature&quot;, &quot;plants&quot; and &quot;animals&quot;</strong>: a possible extra plant</li>
<li><strong>&quot;Love&quot; mentioned twice or more</strong>: a pink table</li>
</ul>
<p>I already have plenty of ideas how the project could be taken further. I would love to implement <a href="../../team/pascal.html">Pascal&#39;s</a> idea of creating different rooms for different time periods; for example, comparing someone&#39;s Twitter room before and after the pandemic by limiting Tweepy’s search accordingly. One could also switch from Twitter to other text sources. One option would be to create a room that reflects one’s browsing history, or to compare the rooms for classic novels by using <a href="https://www.gutenberg.org/">Project Gutenberg</a>.</p>
<p>All in all, one single project managed to teach me new skills in NLP, introduce me to Three.js and take my web development skills to a new level. I’m thankful for the great teammates at MAD and I hope you readers have enjoyed the blog series as well!</p>
<p><a href="https://tweetspace.mad.ac/">Tweet Room app</a></p>
<hr>
</div><footer class="post-footer"><img class="post-footer-image" src="../../images/team/veera.png" alt width="120" height="120" /><p>By <a href="../../team/veera.html">Veera Jussila</a></p><p>29/06/2021</p></footer></article></main></body></html>